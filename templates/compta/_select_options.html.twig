{% if label is defined %}
<label class="block text-sm font-medium text-gray-700 mb-3">{{ label }}</label>
{% endif %}
<div class="relative" x-data="{ selected: false }" x-init="selected = $refs.select.value !== ''">
    <select name="{{ name }}"
            x-ref="select"
            @change="selected = $el.value !== ''"
            class="form-select w-full"
            data-cascade="{{ dataAttribute|default('') }}"
            {% if htmxTarget is defined %}
                hx-get="{{ htmxUrl }}"
                hx-target="{{ htmxTarget }}"
                hx-include="{{ htmxInclude|default('this') }}"
                hx-trigger="change"
            {% endif %}>
        <option value="">{{ placeholder }}</option>
        {% for option in options %}
            <option value="{{ option.id }}">{{ option.code }} - {{ option.libelle }}</option>
        {% endfor %}
    </select>
    <div x-show="selected" class="absolute right-8 top-1/2 -translate-y-1/2 text-green-500 pointer-events-none">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
        </svg>
    </div>
</div>
